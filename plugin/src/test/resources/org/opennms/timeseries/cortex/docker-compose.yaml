---
version: '3'

volumes:
  data-cortex: {}
  data-grafana: {}

services:
  cortex:
    image: docker.io/cortexproject/cortex:v1.2.0-rc.1
    volumes:
      - "data-cortex:/tmp/cortex"
      - "./single-process-config.yaml:/etc/single-process-config.yaml"
    command: [ "-config.file=/etc/single-process-config.yaml" ]
    ports:
      - "9009:9009/tcp"
      - "9095:9095/tcp"

  grafana:
    image: docker.io/grafana/grafana:6.7.2
    hostname: grafana
    environment:
      GF_SECURITY_ADMIN_PASSWORD: mypass
    volumes:
      - data-grafana:/var/lib/grafana
    ports:
      - "3000:3000/tcp"
